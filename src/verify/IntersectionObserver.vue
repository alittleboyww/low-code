<template>
    <div class="image-content">
      <img src="" alt="" data-src="https://picsum.photos/200/300?random=1"><img src="" alt="" data-src="https://picsum.photos/200/300?random=2"><img src="" alt="" data-src="https://picsum.photos/200/300?random=3"><img src="" alt="" data-src="https://picsum.photos/200/300?random=4"><img src="" alt="" data-src="https://picsum.photos/200/300?random=5"><img src="" alt="" data-src="https://picsum.photos/200/300?random=6"><img src="" alt="" data-src="https://picsum.photos/200/300?random=7"><img src="" alt="" data-src="https://picsum.photos/200/300?random=8"><img src="" alt="" data-src="https://picsum.photos/200/300?random=9"><img src="" alt="" data-src="https://picsum.photos/200/300?random=10"><img src="" alt="" data-src="https://picsum.photos/200/300?random=11"><img src="" alt="" data-src="https://picsum.photos/200/300?random=12"><img src="" alt="" data-src="https://picsum.photos/200/300?random=13"><img src="" alt="" data-src="https://picsum.photos/200/300?random=14"><img src="" alt="" data-src="https://picsum.photos/200/300?random=15"><img src="" alt="" data-src="https://picsum.photos/200/300?random=16"><img src="" alt="" data-src="https://picsum.photos/200/300?random=17"><img src="" alt="" data-src="https://picsum.photos/200/300?random=18"><img src="" alt="" data-src="https://picsum.photos/200/300?random=19"><img src="" alt="" data-src="https://picsum.photos/200/300?random=20"><img src="" alt="" data-src="https://picsum.photos/200/300?random=21"><img src="" alt="" data-src="https://picsum.photos/200/300?random=22"><img src="" alt="" data-src="https://picsum.photos/200/300?random=23"><img src="" alt="" data-src="https://picsum.photos/200/300?random=24"><img src="" alt="" data-src="https://picsum.photos/200/300?random=25"><img src="" alt="" data-src="https://picsum.photos/200/300?random=26"><img src="" alt="" data-src="https://picsum.photos/200/300?random=27"><img src="" alt="" data-src="https://picsum.photos/200/300?random=28"><img src="" alt="" data-src="https://picsum.photos/200/300?random=29"><img src="" alt="" data-src="https://picsum.photos/200/300?random=30"><img src="" alt="" data-src="https://picsum.photos/200/300?random=31"><img src="" alt="" data-src="https://picsum.photos/200/300?random=32"><img src="" alt="" data-src="https://picsum.photos/200/300?random=33"><img src="" alt="" data-src="https://picsum.photos/200/300?random=34"><img src="" alt="" data-src="https://picsum.photos/200/300?random=35"><img src="" alt="" data-src="https://picsum.photos/200/300?random=36"><img src="" alt="" data-src="https://picsum.photos/200/300?random=37"><img src="" alt="" data-src="https://picsum.photos/200/300?random=38"><img src="" alt="" data-src="https://picsum.photos/200/300?random=39"><img src="" alt="" data-src="https://picsum.photos/200/300?random=40"><img src="" alt="" data-src="https://picsum.photos/200/300?random=41"><img src="" alt="" data-src="https://picsum.photos/200/300?random=42"><img src="" alt="" data-src="https://picsum.photos/200/300?random=43"><img src="" alt="" data-src="https://picsum.photos/200/300?random=44"><img src="" alt="" data-src="https://picsum.photos/200/300?random=45"><img src="" alt="" data-src="https://picsum.photos/200/300?random=46"><img src="" alt="" data-src="https://picsum.photos/200/300?random=47"><img src="" alt="" data-src="https://picsum.photos/200/300?random=48"><img src="" alt="" data-src="https://picsum.photos/200/300?random=49"><img src="" alt="" data-src="https://picsum.photos/200/300?random=50"><img src="" alt="" data-src="https://picsum.photos/200/300?random=51"><img src="" alt="" data-src="https://picsum.photos/200/300?random=52"><img src="" alt="" data-src="https://picsum.photos/200/300?random=53"><img src="" alt="" data-src="https://picsum.photos/200/300?random=54"><img src="" alt="" data-src="https://picsum.photos/200/300?random=55"><img src="" alt="" data-src="https://picsum.photos/200/300?random=56"><img src="" alt="" data-src="https://picsum.photos/200/300?random=57"><img src="" alt="" data-src="https://picsum.photos/200/300?random=58"><img src="" alt="" data-src="https://picsum.photos/200/300?random=59"><img src="" alt="" data-src="https://picsum.photos/200/300?random=60"><img src="" alt="" data-src="https://picsum.photos/200/300?random=61"><img src="" alt="" data-src="https://picsum.photos/200/300?random=62"><img src="" alt="" data-src="https://picsum.photos/200/300?random=63"><img src="" alt="" data-src="https://picsum.photos/200/300?random=64"><img src="" alt="" data-src="https://picsum.photos/200/300?random=65"><img src="" alt="" data-src="https://picsum.photos/200/300?random=66"><img src="" alt="" data-src="https://picsum.photos/200/300?random=67"><img src="" alt="" data-src="https://picsum.photos/200/300?random=68"><img src="" alt="" data-src="https://picsum.photos/200/300?random=69"><img src="" alt="" data-src="https://picsum.photos/200/300?random=70"><img src="" alt="" data-src="https://picsum.photos/200/300?random=71"><img src="" alt="" data-src="https://picsum.photos/200/300?random=72"><img src="" alt="" data-src="https://picsum.photos/200/300?random=73"><img src="" alt="" data-src="https://picsum.photos/200/300?random=74"><img src="" alt="" data-src="https://picsum.photos/200/300?random=75"><img src="" alt="" data-src="https://picsum.photos/200/300?random=76"><img src="" alt="" data-src="https://picsum.photos/200/300?random=77"><img src="" alt="" data-src="https://picsum.photos/200/300?random=78"><img src="" alt="" data-src="https://picsum.photos/200/300?random=79"><img src="" alt="" data-src="https://picsum.photos/200/300?random=80"><img src="" alt="" data-src="https://picsum.photos/200/300?random=81"><img src="" alt="" data-src="https://picsum.photos/200/300?random=82"><img src="" alt="" data-src="https://picsum.photos/200/300?random=83"><img src="" alt="" data-src="https://picsum.photos/200/300?random=84"><img src="" alt="" data-src="https://picsum.photos/200/300?random=85"><img src="" alt="" data-src="https://picsum.photos/200/300?random=86"><img src="" alt="" data-src="https://picsum.photos/200/300?random=87"><img src="" alt="" data-src="https://picsum.photos/200/300?random=88"><img src="" alt="" data-src="https://picsum.photos/200/300?random=89"><img src="" alt="" data-src="https://picsum.photos/200/300?random=90"><img src="" alt="" data-src="https://picsum.photos/200/300?random=91"><img src="" alt="" data-src="https://picsum.photos/200/300?random=92"><img src="" alt="" data-src="https://picsum.photos/200/300?random=93"><img src="" alt="" data-src="https://picsum.photos/200/300?random=94"><img src="" alt="" data-src="https://picsum.photos/200/300?random=95"><img src="" alt="" data-src="https://picsum.photos/200/300?random=96"><img src="" alt="" data-src="https://picsum.photos/200/300?random=97"><img src="" alt="" data-src="https://picsum.photos/200/300?random=98"><img src="" alt="" data-src="https://picsum.photos/200/300?random=99"><img src="" alt="" data-src="https://picsum.photos/200/300?random=100">
    </div>
  </template>
  
  <script setup lang="ts">
//  参考教程   https://ruanyifeng.com/blog/2016/11/intersectionobserver_api.html
  onMounted(() => {
    let imgArr = document.querySelectorAll('img[data-src]');
    console.log(imgArr);
    // 通过 IntersectionObserver 对图片进行监控
    let observer = new IntersectionObserver((entries) => {
      entries.forEach((item) => {
        // 知道每一项的内容
        console.log(item);
        if (item.isIntersecting) {
          if (item.target instanceof HTMLImageElement) {
            item.target.src = item.target.dataset.src as string;
          }
        }
      });
    });
    imgArr.forEach((item) => {
      observer.observe(item);
    })
  })
  </script>
  <style lang="scss">
  body {
    margin: 0;
    padding: 0;
    background-color: #f0f0f0;
  }
  .image-content {
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    width: 100%;
  }
  img {
    width: 200px;
    height: 300px;
    margin-bottom: 10px;
    border: 1px solid pink;
    background-color: aliceblue;
  }
  </style>